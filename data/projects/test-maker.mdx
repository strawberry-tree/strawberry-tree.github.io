---
title: '효율적 복습을 위한 모의고사 자동제작 서비스'
description: 'LLM을 활용해 학습 자료로부터 객관식 문제 및 해설을 자동 생성하는 에듀테크 서비스'
period: '2024.03. - 2024.04. (2개월)'
startDate: '2024-03'
endDate: '2024-04'
team: '개인 프로젝트'
tags: ['Python', 'Langchain', 'Streamlit', 'OpenAI GPT-4', 'Pydantic']
images: ['/static/images/test-maker.png']
github: 'https://github.com/freud-sensei/test_maker'
links:
  - url: 'https://github.com/strawberry-tree/test_maker/blob/main/%EC%9E%90%EC%97%B0%EC%96%B4%EC%B2%98%EB%A6%AC%EC%99%80%EA%B5%90%EC%9C%A1_%EA%B8%B0%EB%A7%90%EB%B0%9C%ED%91%9C_%EC%86%A1%EC%83%81%EB%A1%9D.pdf'
    text: 발표 자료
---

## 프로젝트 개요

학습 심리학 연구에 따르면 **testing effect**(학습한 내용을 스스로 점검하는 것이 암기에 유용)와 **delayed feedback**(문제 풀이 후 채점 및 구체적 피드백 제공)이 학습 효과를 극대화합니다.

- **Rowland(2014)**: 단순히 학습 내용을 다시 읽는 것보다, test가 학습에 더 도움이 됨
- **Butler et al.(2008)**: test 이후 delayed feedback이 주어지면 학습 효과가 더 커짐

본 서비스는 이러한 연구를 바탕으로 학생이 업로드한 학습 자료(PDF, docx, txt)를 분석하여 **자동으로 객관식 모의고사를 생성**하고, 문제 풀이 후 **채점 및 해설**까지 제공하는 LLM 기반 에듀테크 서비스입니다.

## 핵심 기능 및 기술적 해결

### 1. Pydantic 스키마로 LLM 출력 안정화

**문제점**: GPT-4가 자유 형식으로 답변하면 파싱 실패 위험

**해결**:

```python
class SingleQuestion(BaseModel):
    question: str = Field(description="Multiple choice questions")
    correct: str = Field(description="The correct answer")
    incorrect: List[str] = Field(description="List of incorrect answers")
    explanation: str = Field(description="Explanation on why the answer is correct")

class Questionmaker(BaseModel):
    questions: List[SingleQuestion] = Field(description="List of questions")
```

- Pydantic 스키마로 **JSON 구조 강제**하여 파싱 실패 방지
- `create_structured_output_runnable()`로 LLM, Prompt, Schema를 결합한 Chain 생성
- 문제(question), 정답(correct), 오답 리스트(incorrect), 해설(explanation) 필드 명확히 정의

### 2. Prompt Engineering으로 품질 보장

```python
template = '''
You are a study assistant which must generate unique {num_questions} multiple-choice questions for students.
By using [INPUT_DATA], make multiple choice questions in a structured format.
You must make one correct answer, and a maximum of four incorrect answers.
The language must be in {language}.
Tips: You must return {num_questions} questions, not more and not less.

[INPUT_DATA]:
{input_data}
'''
```

- `num_questions`, `language`, `input_data`를 변수로 받아 **동적 문제 생성**
- "정확히 N개의 문제를 생성하라"는 제약 조건으로 일관성 확보
- 영어로 작성하여 **토큰 비용 절감** (약서 '동백꽃' 모의고사 1회 생성 시 약 $0.125)

### 3. Streamlit 세션 상태 관리

```python
if "current_step" not in sts:
    sts.current_step = "A"
if "questionnaire" not in sts:
    sts.questionnaire = ""

def callback():
    with st.spinner("문제를 생성 중입니다."):
        sts.questionnaire = generate_questionnaire(...)
    sts.current_step = "B"
```

- **3단계 워크플로우**: A(파일 업로드 및 설정) → B(문제 풀이) → C(채점 및 해설)
- `st.session_state`로 current_step, questionnaire, input_text 등 관리
- 콜백 함수로 **단계 전환 및 상태 초기화**, 새로고침해도 데이터 손실 방지

### 4. 다양한 파일 형식 지원 및 캐싱

```python
@st.cache_data
def read_pdf(file):
    text = ""
    reader = PdfReader(file)
    for page in reader.pages:
        text += page.extract_text()
    return text

@st.cache_data
def read_docx(file):
    doc = Document(file)
    text = ""
    for paragraph in doc.paragraphs:
        text += paragraph.text + "\n"
    return text
```

- **PDF 파싱** (PyPDF2): 페이지별 텍스트 추출 및 통합
- **Word 문서 처리** (python-docx): .docx 파일의 단락별 읽기
- **직접 입력**: 텍스트 직접 입력 및 .txt 파일 업로드
- `@st.cache_data` 데코레이터로 **파일 읽기 성능 향상**

## 사용성 평가 결과 (대학생 10명 대상)

### 인지과학적 측면

> "생각보다 자세하게 문제를 만들어서 공급했다... 나름의 심화 내용을 담으려는 모습도 섰어 문제의 질과 양 모두를 보장할 수 있는 프로그램이라는 생각이 듭니다."

- **학습자료의 내용 중 핵심내용이 무엇인지 이해**할 수 있었음
- 어떤 부분을 정확히 알았고, **보충이 필요하거나 오개념이 있는 부분을 파악**할 수 있음

### 컴퓨터공학적 측면

> "선지에 대한 개선이 필요하다고 생각이 된다. 문제를 풀 때 정답 선지만 오답 선지와 정답 선지가 지나치게 구분될 수 있었다."

> "단답을 제공하고 오답이 나올 때 바로 답이 나오는 것이 아니라 설명에 따라 여러 문제가 들었는지만 표시해주고 다시 풀 수 있는 기회가 있었으면 좋겠습니다."

- **논리적 추론이 필요한 문제**를 생성할 수 있게끔, prompt engineering 연구를 진행해야 함
- 정오답 선지를 구별하기 어렵게 하거나, 새로운 문제를 통해 **들린 문제를 복습할 수 있는 기능** 필요

### 교육학적 측면

> "기존 문제집 및 사교육으로 발생하는 비용을 줄일 수 있으리라 기대... 인공지능의 도입 이후에도 기존 교육 전문가의 역할은 중요함"

> "인공지능이 세상을 지배하는 것이 아니, **인공지능을 잘 활용하는 인간이 세상을 지배**한다!"

- 기존 문제집 및 사교육으로 발생하는 **비용을 줄일 수 있으리라 기대**
- 교육 전문가들은 문제 출제보다는 **인공지능이 출제한 문제를 검수하는 역할**에 집중할 것
